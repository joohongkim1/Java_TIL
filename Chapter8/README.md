## Chapter 12. 내부 클래스, 람다식, 스트림



### 1. 내부 클래스

#### 1) 내부 클래스란?

- 클래스 내부에 구현할 클래스 (중첩된 클래스)
- 클래스 내부에서 사용하기 위해 선언하고 구현하는 클래스
- 주로 외부 클래스 생성자에서 내부 클래스를 생성

#### 2) 내부 클래스 종류

- 인스턴스 내부 클래스 : 외부 클래스 멤버 변수와 동일
- 정적 내부 클래스 : 외부 클래스 멤버 변수와 동일
- 지역 내부 클래스 : 메서드 내부에 구현
- 익명 내부 클래스 : 메서드 내부에 구현, 변수에 대입하여 직접 구현, 많이 사용된다.



### 2. 람다식

#### 1) 람다식이란?

- 자바에서 함수형 프로그래밍을 구현하는 방식

- 클래스를 생성하지 않고 함수의 호출만으로 기능을 수행

- 함수형 인터페이스를 선언

#### 2) 함수형 프로그래밍이란?

- 순수 함수를 구현하고 호출
- 매개 변수만을 사용하도록 만든 함수로 외부 자료에 부수적인 영향(side effect) 가 발생하지 않도록 함
- 입력 받은 자료를 기반으로 수행되고 외부에 영향을 미치지 않으므로 병렬처리 등이 가능, 안정적인 확장성 있는 프로그래밍 방식

#### 3) 람다식 문법

- 매개 변수 하나인 경우 괄호 생략 가능

  ```java
  str -> {System.out.println(str);}
  ```

- 중괄호 안의 구현부가 한 문장인 경우 중괄호 생략

  ```java
  str -> System.out.println(str);
  ```

- 중괄호 안의 구현부가 한 문장이라도 return 문은 중괄호를 생략할 수 없음

  ```java
  str -> return str.length(); // 오류 발생
  ```

- 중괄호 안의 구현부가 반환문 하나라면 return 과 중괄호를 모두 생략할 수 있음

  ```java
  (x, y) -> x + y; 
  str -> str.length();
  ```

 

### 3. 스트림

#### 1) 스트림이란?

- 자료의 대상과 관계없이 동일한 연산을 수행할 수 있는 기능(자료의 추상화)
- 배열, 컬렉션에 동일한 연산이 수행되어 일관성 있는 처리 가능
- 한 번 생성하고 사용한 스트림은 재사용할 수 없음
- 스트림 연산은 기존 자료를 변경하지 않음
- 중간 연산과 최종 연산으로 구분 됨
- 최종 연산이 수행되어야 모든 연산이 적용되는 지연 연산

#### 2-1) 스트림 연산 - 중간 연산

- 가장 많이 쓰이는 것 - filter(), map()
- 스트림에서 연산에 대한 구현부는 람다식으로 쓰인다.

#### 2-2) 스트림 연산 - 최종 연산

- 스트림의 자료를 소모하면서 연산을 수행
- 최종 연산 후에 스트림은 더 이상 다른 연산을 적용할 수 없음
- forEach(), count(), sum() 등

#### 3) 직접 정의하는 연산

- reduce() 연산 등

- 정의된 연산이 아닌 프로그래머가 직접 지정하는 연산 적용

- 최종 연산으로 스트림의 요소를 소모하며 연산 수행

- 배열의 모든 요소의 합을 구하는 reduce() 연산

  ```java
  Arrays.stream(arr).reduce(0, (a, b) -> a + b));
  ```

  



